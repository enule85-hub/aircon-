<!DOCTYPE html>
<!-- saved from url=(0045)file:///C:/Users/enule/Downloads/hume_v3.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì—ì–´ì»¨ ì„¤ì¹˜ ê²¬ì  ê³„ì‚°ê¸°</title>
  <link href="./hume2_files/css2" rel="stylesheet">
  <style>
    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

    :root {
      --primary: #1B3A6B;
      --accent: #2563eb;
      --primary-light: #e8eef8;
      --bg: #f0f4fa;
      --card: #ffffff;
      --border: #c9d8ee;
      --text: #1a2640;
      --sub: #5a7099;
      --card-shadow: 0 4px 24px rgba(27,58,107,0.10);
    }

    body {
      font-family: 'Pretendard', 'Noto Sans KR', sans-serif;
      background: var(--bg);
      min-height: 100vh;
      color: var(--text);
    }

    /* â”€â”€ í—¤ë” â”€â”€ */
    header {
      background: linear-gradient(135deg, #1B3A6B 0%, #2563eb 100%);
      color: white;
      padding: 28px 20px 22px;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    header::before {
      content: ''; position: absolute;
      top: -40px; right: -40px;
      width: 180px; height: 180px;
      border-radius: 50%; background: rgba(255,255,255,0.08);
    }
    header::after {
      content: ''; position: absolute;
      bottom: -30px; left: -20px;
      width: 120px; height: 120px;
      border-radius: 50%; background: rgba(255,255,255,0.06);
    }
    header h1 { font-size: 1.5rem; font-weight: 900; letter-spacing: -0.5px; position: relative; }
    header p  { margin-top: 6px; font-size: 0.85rem; opacity: 0.88; position: relative; }

    /* â”€â”€ ì§„í–‰ íƒ­ â”€â”€ */
    .step-tabs {
      display: flex;
      align-items: flex-start;
      justify-content: center;
      padding: 20px 24px 0;
      background: var(--bg);
    }
    .tab-item {
      display: flex; flex-direction: column; align-items: center;
      position: relative; flex: 1; max-width: 90px;
    }
    .tab-item:not(:last-child)::after {
      content: '';
      position: absolute;
      top: 17px; left: calc(50% + 18px);
      width: calc(100% - 36px); height: 2px;
      background: var(--border);
      transition: background 0.35s;
    }
    .tab-item.done:not(:last-child)::after { background: var(--accent); }

    .tab-num {
      width: 34px; height: 34px;
      border-radius: 50%;
      border: 2.5px solid var(--border);
      background: white;
      display: flex; align-items: center; justify-content: center;
      font-size: 0.82rem; font-weight: 800; color: var(--sub);
      position: relative; z-index: 1;
      transition: all 0.3s;
    }
    .tab-item.active .tab-num {
      border-color: var(--accent);
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white;
      box-shadow: 0 2px 12px rgba(37,99,235,0.35);
    }
    .tab-item.done .tab-num {
      border-color: var(--accent);
      background: var(--accent);
      color: white;
    }
    .tab-num-inner { line-height: 1; }
    .tab-item.done .tab-num-inner { display: none; }
    .tab-check { display: none; font-size: 0.78rem; }
    .tab-item.done .tab-check { display: block; }

    .tab-label {
      margin-top: 5px; font-size: 0.66rem; font-weight: 600;
      color: var(--sub); text-align: center; white-space: nowrap;
      transition: color 0.3s;
    }
    .tab-item.active .tab-label { color: var(--accent); font-weight: 700; }
    .tab-item.done .tab-label   { color: var(--accent); }

    /* â”€â”€ ì»¨í…Œì´ë„ˆ â”€â”€ */
    .container {
      max-width: 560px;
      margin: 0 auto;
      padding: 16px 16px 40px;
    }

    /* â”€â”€ ë‹¨ê³„ ì¹´ë“œ â”€â”€ */
    .step-card {
      background: var(--card);
      border-radius: 20px;
      box-shadow: var(--card-shadow);
      padding: 24px 20px 20px;
      border: 1.5px solid var(--border);
    }
    .step-card.slide-in-right { animation: slideRight 0.28s ease both; }
    .step-card.slide-in-left  { animation: slideLeft  0.28s ease both; }
    @keyframes slideRight {
      from { opacity: 0; transform: translateX(28px); }
      to   { opacity: 1; transform: translateX(0); }
    }
    @keyframes slideLeft {
      from { opacity: 0; transform: translateX(-28px); }
      to   { opacity: 1; transform: translateX(0); }
    }

    .step-header {
      display: flex; align-items: center; gap: 10px;
      margin-bottom: 18px; padding-bottom: 14px;
      border-bottom: 1.5px solid var(--primary-light);
    }
    .step-icon { font-size: 1.25rem; }
    .step-title { font-size: 1.05rem; font-weight: 800; color: var(--text); }

    /* ì„ íƒ ë²„íŠ¼ */
    .options { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
    .options.cols-1 { grid-template-columns: 1fr; }
    .options.cols-3 { grid-template-columns: 1fr 1fr 1fr; }

    .opt-btn {
      border: 1.5px solid var(--border);
      background: #f5f8ff;
      border-radius: 14px;
      padding: 16px 12px;
      font-family: inherit; font-size: 0.9rem; font-weight: 600;
      color: var(--text); cursor: pointer;
      transition: all 0.18s; text-align: center; line-height: 1.5;
    }
    .opt-btn:hover  { border-color: var(--accent); background: var(--primary-light); transform: translateY(-2px); }
    .opt-btn.selected {
      border-color: var(--primary);
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white; font-weight: 700;
      box-shadow: 0 4px 16px rgba(27,58,107,0.25);
    }

    .desc-box {
      margin-top: 12px; background: #e8eef8;
      border: 1px solid #b8cce8; border-radius: 10px;
      padding: 10px 14px; font-size: 0.82rem;
      color: var(--primary); font-weight: 600; display: none;
    }
    .desc-box.show { display: block; }

    /* ì¶”ê°€ì˜µì…˜ í•­ëª© */
    .extra-item {
      display: flex; align-items: center;
      justify-content: space-between;
      padding: 14px 0; border-bottom: 1px solid #eaf0f8; gap: 12px;
    }
    .extra-item:last-of-type { border-bottom: none; }
    .extra-label { font-size: 0.9rem; font-weight: 600; flex: 1; }
    .extra-label small { display: block; color: var(--sub); font-size: 0.78rem; margin-top: 3px; }
    .extra-controls { display: flex; align-items: center; gap: 8px; }

    .cnt-btn {
      width: 36px; height: 36px; border-radius: 50%;
      border: 1.5px solid #b8cce8; background: var(--primary-light);
      font-size: 1.2rem; font-weight: 700; cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      color: var(--primary); transition: all 0.15s;
    }
    .cnt-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }
    .cnt-val { font-size: 1rem; font-weight: 800; min-width: 26px; text-align: center; color: var(--primary); }

    .toggle-btn {
      width: 50px; height: 28px; border-radius: 14px;
      border: none; background: #d0ddf0;
      cursor: pointer; position: relative; transition: background 0.25s; flex-shrink: 0;
    }
    .toggle-btn::after {
      content: ''; position: absolute;
      top: 4px; left: 4px; width: 20px; height: 20px;
      border-radius: 50%; background: white;
      transition: left 0.25s; box-shadow: 0 1px 4px rgba(0,0,0,0.2);
    }
    .toggle-btn.on { background: linear-gradient(135deg, var(--primary), var(--accent)); }
    .toggle-btn.on::after { left: 26px; }

    /* â”€â”€ ì´ì „/ë‹¤ìŒ ë²„íŠ¼ ì˜ì—­ â”€â”€ */
    .nav-btns {
      display: flex;
      gap: 10px;
      margin-top: 20px;
    }
    .btn-prev {
      flex: 0 0 auto;
      padding: 15px 20px;
      border-radius: 14px;
      border: 1.5px solid var(--border);
      background: white;
      font-family: inherit; font-size: 0.95rem; font-weight: 700;
      color: var(--sub); cursor: pointer;
      transition: all 0.18s;
      display: flex; align-items: center; gap: 6px;
    }
    .btn-prev:hover { border-color: var(--primary); color: var(--primary); }

    .btn-next {
      flex: 1;
      padding: 15px;
      border-radius: 14px;
      border: none;
      background: linear-gradient(135deg, var(--primary), var(--accent));
      color: white; font-family: inherit; font-size: 1rem; font-weight: 800;
      cursor: pointer; transition: all 0.2s;
      box-shadow: 0 4px 16px rgba(27,58,107,0.25);
      display: flex; align-items: center; justify-content: center; gap: 6px;
    }
    .btn-next:hover { opacity: 0.9; transform: translateY(-1px); }
    .btn-next:disabled {
      background: #c8d5e8; box-shadow: none;
      cursor: not-allowed; transform: none; opacity: 1;
    }

    /* â”€â”€ ê²¬ì  ê²°ê³¼ â”€â”€ */
    .result-card {
      background: linear-gradient(135deg, #1B3A6B 0%, #2563eb 100%);
      border-radius: 20px; padding: 28px 24px;
      color: white; box-shadow: 0 8px 32px rgba(27,58,107,0.25);
    }
    .result-card.slide-in-right { animation: slideRight 0.28s ease both; }
    .result-title { font-size: 0.88rem; opacity: 0.88; margin-bottom: 6px; font-weight: 500; }
    .result-total { font-size: 2.4rem; font-weight: 900; letter-spacing: -1.5px; }
    .result-total span { font-size: 1rem; font-weight: 500; opacity: 0.85; }
    .result-breakdown {
      margin-top: 20px; background: rgba(0,0,0,0.15);
      border-radius: 12px; padding: 16px; backdrop-filter: blur(4px);
    }
    .breakdown-row {
      display: flex; justify-content: space-between;
      font-size: 0.85rem; padding: 5px 0; opacity: 0.92;
    }
    .breakdown-row.total-row {
      border-top: 1px solid rgba(255,255,255,0.25);
      margin-top: 10px; padding-top: 12px;
      font-weight: 800; font-size: 1rem; opacity: 1;
    }
    .notice {
      margin-top: 16px; background: rgba(0,0,0,0.12);
      border-radius: 10px; padding: 12px;
      font-size: 0.78rem; line-height: 1.7; opacity: 0.88;
    }

    .reset-btn {
      display: block; width: 100%; margin-top: 12px;
      padding: 15px; border-radius: 14px;
      border: 1.5px solid #b8cce8; background: white;
      font-family: inherit; font-size: 0.95rem; font-weight: 700;
      color: var(--primary); cursor: pointer; transition: all 0.18s;
    }
    .reset-btn:hover { background: var(--primary); color: white; border-color: var(--primary); }

    /* ì„ íƒ í•„ìš” ì•ˆë‚´ */
    .select-hint {
      margin-top: 10px; padding: 8px 14px;
      background: #fff3cd; border: 1px solid #ffc107;
      border-radius: 10px; font-size: 0.8rem;
      color: #856404; font-weight: 600; display: none;
      text-align: center;
    }
    .select-hint.show { display: block; }

    .hidden { display: none !important; }
  </style>
</head>
<body>

<header>
  <h1>â„ï¸ ì—ì–´ì»¨ ì„¤ì¹˜ ê²¬ì  ê³„ì‚°ê¸°</h1>
  <p>í•­ëª©ì„ ì„ íƒí•˜ì‹œë©´ ì˜ˆìƒ ê²¬ì ì„ ë°”ë¡œ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”</p>
</header>

<!-- ì§„í–‰ íƒ­ -->
<div class="step-tabs" id="step-tabs">
  <div class="tab-item done" id="tab1">
    <div class="tab-num"><span class="tab-num-inner">1</span><span class="tab-check">âœ“</span></div>
    <div class="tab-label">ì„¤ì¹˜ìœ í˜•</div>
  </div>
  <div class="tab-item done" id="tab2">
    <div class="tab-num"><span class="tab-num-inner">2</span><span class="tab-check">âœ“</span></div>
    <div class="tab-label">ì—ì–´ì»¨ì¢…ë¥˜</div>
  </div>
  <div class="tab-item done" id="tab3">
    <div class="tab-num"><span class="tab-num-inner">3</span><span class="tab-check">âœ“</span></div>
    <div class="tab-label">ì œì¡°ì‚¬</div>
  </div>
  <div class="tab-item active" id="tab4">
    <div class="tab-num"><span class="tab-num-inner">4</span><span class="tab-check">âœ“</span></div>
    <div class="tab-label">ì¶”ê°€ì˜µì…˜</div>
  </div>
</div>

<div class="container">

  <!-- 1ë‹¨ê³„ -->
  <div class="step-card slide-in-right hidden" id="step1">
    <div class="step-header">
      <span class="step-icon">ğŸ </span>
      <div class="step-title">ì„¤ì¹˜ ìœ í˜• ì„ íƒ</div>
    </div>
    <div class="options cols-1">
      <button class="opt-btn selected" onclick="selectOpt(1,&#39;ì´ì „ì„¤ì¹˜&#39;,this)">
        ì´ì „ì„¤ì¹˜<br>
        <small style="font-weight:400;font-size:0.78rem;opacity:0.7">ê¸°ì¡´ ì—ì–´ì»¨ì„ ë‹¤ë¥¸ ì¥ì†Œë¡œ ì´ë™</small>
      </button>
      <button class="opt-btn" onclick="selectOpt(1,&#39;ì¬ì„¤ì¹˜&#39;,this)">
        ì¬ì„¤ì¹˜<br>
        <small style="font-weight:400;font-size:0.78rem;opacity:0.7">ê¸°ì¡´ ì¥ì†Œì— ë‹¤ì‹œ ì„¤ì¹˜</small>
      </button>
    </div>
    <div class="select-hint" id="hint1">âš ï¸ ì„¤ì¹˜ ìœ í˜•ì„ ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="nav-btns">
      <!-- 1ë‹¨ê³„ëŠ” ì´ì „ ì—†ìŒ -->
      <button class="btn-next" onclick="goNext(1)">ë‹¤ìŒ ë‹¨ê³„ <span>â†’</span></button>
    </div>
  </div>

  <!-- 2ë‹¨ê³„ -->
  <div class="step-card slide-in-right hidden" id="step2">
    <div class="step-header">
      <span class="step-icon">â„ï¸</span>
      <div class="step-title">ì—ì–´ì»¨ ì¢…ë¥˜ ì„ íƒ</div>
    </div>
    <div class="options cols-1">
      <button class="opt-btn" onclick="selectOpt(2,&#39;ë²½ê±¸ì´&#39;,this)">ë²½ê±¸ì´ <span style="font-weight:400;opacity:0.75;font-size:0.82rem">160,000ì›</span><br><small style="font-weight:400;font-size:0.75rem;opacity:0.6">(ê¸°ë³¸ì„¤ì¹˜ë¹„ ë°°ê´€5m+ê°€ìŠ¤ì¶©ì „+íƒ€ê³µ1íšŒ)</small></button>
      <button class="opt-btn" onclick="selectOpt(2,&#39;ìŠ¤íƒ ë“œ&#39;,this)">ìŠ¤íƒ ë“œ <span style="font-weight:400;opacity:0.75;font-size:0.82rem">190,000ì›</span><br><small style="font-weight:400;font-size:0.75rem;opacity:0.6">(ê¸°ë³¸ì„¤ì¹˜ë¹„ ë°°ê´€5m+ê°€ìŠ¤ì¶©ì „+íƒ€ê³µ1íšŒ)</small></button>
      <button class="opt-btn selected" onclick="selectOpt(2,&#39;íˆ¬ì¸ì›&#39;,this)">íˆ¬ì¸ì› <span style="font-weight:400;opacity:0.75;font-size:0.82rem">310,000ì›</span><br><small style="font-weight:400;font-size:0.75rem;opacity:0.6">(ê¸°ë³¸ì„¤ì¹˜ë¹„ ë²½ê±¸ì´5m+ìŠ¤íƒ ë“œ5m+ê°€ìŠ¤ì¶©ì „+íƒ€ê³µ2íšŒ)</small></button>
      <button class="opt-btn" onclick="selectOpt(2,&#39;ëƒ‰ë‚œë°©ë²½ê±¸ì´&#39;,this)">ëƒ‰ë‚œë°© ë²½ê±¸ì´ <span style="font-weight:400;opacity:0.75;font-size:0.82rem">ë³„ë„ë¬¸ì˜</span></button>
      <button class="opt-btn" onclick="selectOpt(2,&#39;ëƒ‰ë‚œë°©ìŠ¤íƒ ë“œ&#39;,this)">ëƒ‰ë‚œë°© ìŠ¤íƒ ë“œ <span style="font-weight:400;opacity:0.75;font-size:0.82rem">ë³„ë„ë¬¸ì˜</span></button>
    </div>
    <div class="select-hint" id="hint2">âš ï¸ ì—ì–´ì»¨ ì¢…ë¥˜ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="nav-btns">
      <button class="btn-prev" onclick="goPrev(2)"><span>â†</span> ì´ì „</button>
      <button class="btn-next" onclick="goNext(2)">ë‹¤ìŒ ë‹¨ê³„ <span>â†’</span></button>
    </div>
  </div>

  <!-- 3ë‹¨ê³„ -->
  <div class="step-card slide-in-right hidden" id="step3">
    <div class="step-header">
      <span class="step-icon">ğŸ­</span>
      <div class="step-title">ì œì¡°ì‚¬ ì„ íƒ</div>
    </div>
    <div class="options cols-3">
      <button class="opt-btn" onclick="selectOpt(3,&#39;LG&#39;,this)">LG</button>
      <button class="opt-btn" onclick="selectOpt(3,&#39;ì‚¼ì„±&#39;,this)">ì‚¼ì„±</button>
      <button class="opt-btn" onclick="selectOpt(3,&#39;ìºë¦¬ì–´&#39;,this)">ìºë¦¬ì–´</button>
      <button class="opt-btn" onclick="selectOpt(3,&#39;ìœ„ë‹ˆì•„&#39;,this)">ìœ„ë‹ˆì•„</button>
      <button class="opt-btn selected" onclick="selectOpt(3,&#39;ê¸°íƒ€&#39;,this)">ê¸°íƒ€</button>
    </div>
    <div class="desc-box" id="smartlink-desc">
      ğŸ”§ <strong>ìŠ¤ë§ˆíŠ¸ë§í¬ (+40,000ì›)</strong> â€” ì‚¼ì„± ì „ìš© ë°°ê´€ì—°ê²°ë¶€ì†ì´ ì¶”ê°€ë©ë‹ˆë‹¤.
    </div>
    <div class="select-hint" id="hint3">âš ï¸ ì œì¡°ì‚¬ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”</div>
    <div class="nav-btns">
      <button class="btn-prev" onclick="goPrev(3)"><span>â†</span> ì´ì „</button>
      <button class="btn-next" onclick="goNext(3)">ë‹¤ìŒ ë‹¨ê³„ <span>â†’</span></button>
    </div>
  </div>

  <!-- 4ë‹¨ê³„ -->
  <div class="step-card slide-in-right" id="step4">
    <div class="step-header">
      <span class="step-icon">âš™ï¸</span>
      <div class="step-title">ì¶”ê°€ ì˜µì…˜ ì„ íƒ</div>
    </div>
    <div class="extra-item">
      <div class="extra-label">ë°°ê´€ ì¶”ê°€<small id="pipe-price-label">1më‹¹ 18,000ì›</small></div>
      <div class="extra-controls">
        <button class="cnt-btn" onclick="changePipe(-1)">âˆ’</button>
        <div class="cnt-val" id="pipe-cnt">0</div>
        <button class="cnt-btn" onclick="changePipe(1)">+</button>
        <span style="font-size:0.8rem;color:var(--sub)">m</span>
      </div>
    </div>
    <div class="extra-item">
      <div class="extra-label">ì‹¤ì™¸ê¸° ì•µê¸€<small id="angle-price-label">ìŠ¤íƒ ë“œ/íˆ¬ì¸ì›ìš© 120,000ì›</small></div>
      <div class="extra-controls">
        <button class="toggle-btn" id="angle-toggle" onclick="toggleExtra(&#39;angle&#39;)"></button>
      </div>
    </div>
    <div class="extra-item">
      <div class="extra-label">ë°°ìˆ˜íŒí”„<small>100,000ì›</small></div>
      <div class="extra-controls">
        <button class="toggle-btn" id="pump-toggle" onclick="toggleExtra(&#39;pump&#39;)"></button>
      </div>
    </div>
    <div class="nav-btns">
      <button class="btn-prev" onclick="goPrev(4)"><span>â†</span> ì´ì „</button>
      <button class="btn-next" onclick="showResult()">ê²¬ì  í™•ì¸ <span>â†’</span></button>
    </div>
  </div>

  <!-- ê²°ê³¼ -->
  <div class="result-card hidden" id="result">
    <div class="result-title">ì˜ˆìƒ ê²¬ì  ê¸ˆì•¡</div>
    <div class="result-total" id="total-price">0 <span>ì›</span></div>
    <div class="result-breakdown" id="breakdown"></div>
    <div class="notice">
      â€» ìœ„ ê¸ˆì•¡ì€ ì˜ˆìƒ ê²¬ì ì´ë©°, í˜„ì¥ ìƒí™©ì— ë”°ë¼ ë³€ë™ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.<br>
      ì •í™•í•œ ê²¬ì ì€ ë°©ë¬¸ í›„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.
    </div>
  </div>

  <button class="reset-btn hidden" id="reset-btn" onclick="resetAll()">ğŸ”„ ë‹¤ì‹œ ê³„ì‚°í•˜ê¸°</button>

</div>

<script>
  const state = {
    step1: null, step2: null, step2Price: 0,
    step3: null, pipeCnt: 0, angle: false, pump: false, isInquiry: false,
  };

  const BASE_PRICE = {
    'ì´ì „ì„¤ì¹˜': { 'ë²½ê±¸ì´': 160000, 'ìŠ¤íƒ ë“œ': 190000, 'íˆ¬ì¸ì›': 310000, 'ëƒ‰ë‚œë°©ë²½ê±¸ì´': null, 'ëƒ‰ë‚œë°©ìŠ¤íƒ ë“œ': null },
    'ì¬ì„¤ì¹˜':   { 'ë²½ê±¸ì´': 160000, 'ìŠ¤íƒ ë“œ': 190000, 'íˆ¬ì¸ì›': 310000, 'ëƒ‰ë‚œë°©ë²½ê±¸ì´': null, 'ëƒ‰ë‚œë°©ìŠ¤íƒ ë“œ': null }
  };
  const PIPE_PRICE  = { 'ë²½ê±¸ì´': 15000, 'ëƒ‰ë‚œë°©ë²½ê±¸ì´': 15000, 'ìŠ¤íƒ ë“œ': 18000, 'íˆ¬ì¸ì›': 18000, 'ëƒ‰ë‚œë°©ìŠ¤íƒ ë“œ': 18000 };
  const ANGLE_PRICE = { 'ë²½ê±¸ì´': 100000, 'ëƒ‰ë‚œë°©ë²½ê±¸ì´': 100000, 'ìŠ¤íƒ ë“œ': 120000, 'íˆ¬ì¸ì›': 120000, 'ëƒ‰ë‚œë°©ìŠ¤íƒ ë“œ': 120000 };
  const SMARTLINK = 40000, PUMP = 100000, STEP_MAX = 4;

  // ì„ íƒ ì €ì¥
  function selectOpt(step, val, btn) {
    if (step === 1) state.step1 = val;
    if (step === 2) {
      state.step2 = val;
      const price = BASE_PRICE[state.step1][val];
      state.step2Price = price || 0;
      state.isInquiry  = (price === null);
      document.getElementById('pipe-price-label').textContent = `1më‹¹ ${(PIPE_PRICE[val]||15000).toLocaleString()}ì›`;
      const isWall = val==='ë²½ê±¸ì´'||val==='ëƒ‰ë‚œë°©ë²½ê±¸ì´';
      document.getElementById('angle-price-label').textContent = isWall ? 'ë²½ê±¸ì´ìš© 100,000ì›' : 'ìŠ¤íƒ ë“œ/íˆ¬ì¸ì›ìš© 120,000ì›';
    }
    if (step === 3) {
      state.step3 = val;
      document.getElementById('smartlink-desc').classList.toggle('show', val==='ì‚¼ì„±');
    }
    // ë²„íŠ¼ í•˜ì´ë¼ì´íŠ¸
    btn.closest('.step-card').querySelectorAll('.opt-btn').forEach(b => b.classList.remove('selected'));
    btn.classList.add('selected');
    // íŒíŠ¸ ìˆ¨ê¸°ê¸°
    const hint = document.getElementById('hint'+step);
    if (hint) hint.classList.remove('show');
  }

  // ë‹¤ìŒ ë‹¨ê³„
  function goNext(from) {
    const val = from===1 ? state.step1 : from===2 ? state.step2 : state.step3;
    if (from <= 3 && !val) {
      document.getElementById('hint'+from).classList.add('show');
      return;
    }
    // ë³„ë„ë¬¸ì˜: 2ë‹¨ê³„ì—ì„œ ë°”ë¡œ ê²°ê³¼
    if (from===2 && state.isInquiry) {
      switchStep(from, null, true);
      return;
    }
    switchStep(from, from+1, false);
  }

  // ì´ì „ ë‹¨ê³„
  function goPrev(from) {
    switchStep(from, from-1, false, true);
  }

  // ë‹¨ê³„ ì „í™˜ (dir=true: ì™¼ìª½ì—ì„œ ì˜¤ëŠ” ì• ë‹ˆ)
  function switchStep(fromStep, toStep, toResult, goingBack=false) {
    // í˜„ì¬ ë‹¨ê³„ ìˆ¨ê¸°ê¸°
    if (fromStep) {
      const el = document.getElementById('step'+fromStep);
      if (el) el.classList.add('hidden');
    }
    hide('result'); hide('reset-btn');

    if (toResult) {
      // ë³„ë„ë¬¸ì˜ ê²°ê³¼
      updateTabs(null);
      const result = document.getElementById('result');
      result.classList.remove('hidden');
      result.classList.remove('slide-in-right');
      void result.offsetWidth;
      result.classList.add('slide-in-right');
      document.getElementById('total-price').innerHTML = 'ë³„ë„ ë¬¸ì˜ <span>í•„ìš”</span>';
      document.getElementById('breakdown').innerHTML = `
        <div class="breakdown-row"><span>${state.step2}</span><span>ë³„ë„ ê²¬ì </span></div>
        <div class="breakdown-row" style="margin-top:8px;opacity:0.85;font-size:0.8rem;">
          <span>ğŸ“ ëƒ‰ë‚œë°© ì œí’ˆì€ í˜„ì¥ í™•ì¸ í›„ ì •í™•í•œ ê²¬ì ì„ ì•ˆë‚´ë“œë¦½ë‹ˆë‹¤.</span>
        </div>`;
      show('reset-btn');
      return;
    }

    updateTabs(toStep);
    const el = document.getElementById('step'+toStep);
    el.classList.remove('hidden');
    el.classList.remove('slide-in-right');
    el.classList.remove('slide-in-left');
    void el.offsetWidth;
    el.classList.add(goingBack ? 'slide-in-left' : 'slide-in-right');

    // 3â†’4 ì´ë™ì‹œ ì˜µì…˜ ì´ˆê¸°í™”
    if (toStep===4 && !goingBack) {
      state.pipeCnt=0; state.angle=false; state.pump=false;
      document.getElementById('pipe-cnt').textContent='0';
      document.getElementById('angle-toggle').className='toggle-btn';
      document.getElementById('pump-toggle').className='toggle-btn';
    }
  }

  function showResult() {
    hide('step4');
    updateTabs(null); // ëª¨ë‘ done
    const result = document.getElementById('result');
    result.classList.remove('hidden');
    result.classList.remove('slide-in-right');
    void result.offsetWidth;
    result.classList.add('slide-in-right');
    show('reset-btn');
    calcResult();
  }

  function calcResult() {
    if (state.isInquiry) return;
    const items = []; let total = 0;
    const base = BASE_PRICE[state.step1][state.step2];
    items.push({ label:`ê¸°ë³¸ ì„¤ì¹˜ë¹„ (${state.step1} Â· ${state.step2})`, price: base }); total += base;
    if (state.step3==='ì‚¼ì„±')  { items.push({ label:'ìŠ¤ë§ˆíŠ¸ë§í¬ (ì‚¼ì„± ì „ìš©)', price:SMARTLINK }); total+=SMARTLINK; }
    if (state.pipeCnt>0) {
      const pp = PIPE_PRICE[state.step2]*state.pipeCnt;
      items.push({ label:`ë°°ê´€ ì¶”ê°€ ${state.pipeCnt}m`, price:pp }); total+=pp;
    }
    if (state.angle) { const ap=ANGLE_PRICE[state.step2]; items.push({label:'ì‹¤ì™¸ê¸° ì•µê¸€',price:ap}); total+=ap; }
    if (state.pump)  { items.push({label:'ë°°ìˆ˜íŒí”„',price:PUMP}); total+=PUMP; }

    document.getElementById('total-price').innerHTML = total.toLocaleString()+' <span>ì›</span>';
    let html = items.map(i=>`<div class="breakdown-row"><span>${i.label}</span><span>${i.price.toLocaleString()}ì›</span></div>`).join('');
    html += `<div class="breakdown-row total-row"><span>í•©ê³„</span><span>${total.toLocaleString()}ì›</span></div>`;
    document.getElementById('breakdown').innerHTML = html;
  }

  function updateTabs(activeStep) {
    for (let i=1;i<=STEP_MAX;i++) {
      const tab = document.getElementById('tab'+i);
      tab.classList.remove('active','done');
      if (activeStep===null || i<activeStep) tab.classList.add('done');
      else if (i===activeStep) tab.classList.add('active');
    }
  }

  function changePipe(d) {
    state.pipeCnt = Math.max(0, state.pipeCnt+d);
    document.getElementById('pipe-cnt').textContent = state.pipeCnt;
  }
  function toggleExtra(key) {
    state[key] = !state[key];
    document.getElementById(key+'-toggle').className='toggle-btn'+(state[key]?' on':'');
  }

  function resetAll() {
    state.step1=null; state.step2=null; state.step3=null;
    state.step2Price=0; state.pipeCnt=0; state.angle=false;
    state.pump=false; state.isInquiry=false;
    hide('result'); hide('reset-btn');
    for(let i=2;i<=STEP_MAX;i++) hide('step'+i);
    document.getElementById('smartlink-desc').classList.remove('show');
    document.querySelectorAll('.select-hint').forEach(h=>h.classList.remove('show'));
    document.querySelectorAll('.opt-btn').forEach(b=>b.classList.remove('selected'));
    const s1=document.getElementById('step1');
    s1.classList.remove('hidden');
    s1.classList.remove('slide-in-right','slide-in-left');
    void s1.offsetWidth;
    s1.classList.add('slide-in-left');
    updateTabs(1);
  }

  function show(id) { document.getElementById(id).classList.remove('hidden'); }
  function hide(id) { document.getElementById(id).classList.add('hidden'); }

  updateTabs(1);
</script>


</body></html>